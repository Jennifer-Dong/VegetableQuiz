const vegetables = {
    "Carrot": {
        name: "Carrot",
        blurb: "Carrots are the dependable workhorses of the vegetable world. Always ready to lend their bright orange color and satisfying crunch to any dish, they’re the unsung heroes in everything from soups to salads. The carrot doesn’t crave the spotlight, but without it, many meals would lack that crucial bit of substance and structure. Carrots are often the foundational element in a dish, bringing order and predictability, and thrives on reliability and routine. And let's not forget—carrots are often associated with improved vision, because they are always looking ahead, planning for the future with a clear, focused gaze",
        image: "images/carrot.jpg"
    },
    "Potato": {
        name: "Potato",
        blurb: "The potato is the ultimate comfort vegetable, and the ultimate source of support. Versatile and unassuming, potatoes can be found in almost every corner of the culinary world. Whether they're mashed, baked, or turned into crispy fries, potatoes are always there to offer nourishment and warmth. Potatoes thrive on being helpful and adaptable to others' needs. They don't need to be flashy or the center of attention; their satisfaction comes from quietly providing sustenance. They can be transformed into a variety of dishes, ready to adjust and adapt, always putting others first while staying true to their roots.",
        image: "images/potato.jpg"
    },
    "Kale": {
        name: "Kale",
        blurb: "Kale is the enigmatic superfood of the vegetable world, much like people who are often seen as a mysterious and deep thinker. Rich in nutrients and packed with hidden benefits, kale is the veggie that cares for your body in ways you might not even realize, just like you may be often tuned in to the needs of others on a profound, almost intuitive level. Kale isn’t everyone’s favorite at first glance, and can be hard to read, but those who appreciate it recognize its true value. It’s a vegetable that nourishes the soul as much as the body, advocating for a healthier, more balanced life, just as the people who promote understanding and harmony in the world.",
        image: "images/kale.jpg"
    },
    "Broccoli": {
        name: "Broccoli",
        blurb: "Broccoli is the structured, strategic planner of the vegetable kingdom. With its carefully designed florets and firm stems, broccoli is like the blueprint for a well-organized diet. It’s not a veggie that does things by halves; it’s all about efficiency and effectiveness. Broccoli is packed with nutrients, offering a wealth of health benefits for those who incorporate it into their meals—just as you bring a wealth of knowledge and strategic thinking to any situation. And while it might not be the first choice for everyone, those who appreciate broccoli’s logical structure and nutritional value recognize it as an essential part of a balanced life, much like how your keen insights are vital to any successful plan.",
        image: "images/kale.jpg"
    },
    "Zucchini": {
        name: "Zucchini",
        blurb: "Zucchini is the versatile, adaptable vegetable that can take on almost any role in the kitchen, always ready to jump into action. Whether it’s grilled, sautéed, or spiralized into ‘zoodles,’ zucchini can do it all, and with a cool, calm efficiency. It’s the veggie equivalent of a Swiss Army knife—always useful, always practical, and always up for trying something new. You thrive on hands-on experiences, and zucchini is the perfect match, able to be shaped and transformed in countless creative ways. Whether it’s taking on the starring role in a dish or supporting other ingredients, zucchini is always ready to make things work.",
        image: "images/zucchini.jpg"
    },
    "Avocado": {
        name: "Avocado",
        blurb: "Avocado is the smooth, stylish trendsetter of the veggie world, much like you who is always seeking new experiences and creative expression. Known for its rich, creamy texture and vibrant green color, the avocado is a favorite among those who appreciate the finer things in life and is drawn to beauty and artistry in all its forms. Whether it’s sliced onto toast, mashed into guacamole, or blended into a smoothie, avocado brings a touch of luxury to any dish, embodying the people’s love for sensory experiences. But avocados aren’t just about appearances; they’re also packed with healthy fats and nutrients, proving that they have substance as well as style.",
        image: "images/avocado.jpg"
    },
    "Sweet Potato": {
        name: "Sweet Potato",
        blurb: "Sweet potatoes are the dreamers of the vegetable world, embodying warmth and idealism. With their rich, sweet flavor and comforting texture, sweet potatoes offer a sense of nurturing and care that is deeply appreciated by those who seek comfort food for the soul. Just as you are driven by a desire to make the world a better place, sweet potatoes bring a sense of well-being and satisfaction to any meal. They can be baked, roasted, or mashed, offering a range of possibilities that mirror your creative and open-minded nature. Sweet potatoes are often found in the background, quietly adding depth and sweetness to a dish without demanding the spotlight.",
        image: "images/sweet_potato.jpg"
    },
    "Cauliflower": {
        name: "Cauliflower",
        blurb: "Cauliflower is the intellectual chameleon of the vegetable world, always seeking to explore new ideas and possibilities. With its mild flavor and versatile texture, cauliflower can be transformed into a multitude of dishes—whether it’s rice, pizza crust, or even mashed potatoes. This adaptability mirrors your love for experimentation and innovation, always looking for new ways to challenge the status quo. Cauliflower’s ability to take on different forms and flavors without losing its identity reflecting its intellectual curiosity and creative problem-solving skills. It’s a vegetable that encourages you to think outside the box, and thrives on pushing the boundaries of conventional thought.",
        image: "images/cauliflower.jpg"
    },
    "Chili Pepper": {
        name: "Chili Pepper",
        blurb: "Chili peppers are the bold, adventurous thrill-seekers of the vegetable world,  who thrives on excitement and challenge. Known for their fiery heat and vibrant colors, chili peppers bring a burst of energy and intensity to any dish. They’re not for the faint of heart, and is always ready to take risks and push the limits. Chili peppers can add just the right amount of spice to a meal, making it unforgettable, leaving a lasting impression wherever they go. And while they might be intense, chili peppers are also incredibly versatile, able to enhance a wide range of flavors and cuisines, always finding new ways to shake things up.",
        image: "images/chili_pepper.jpg"
    },
    "Bell Pepper": {
        name: "Bell Pepper",
        blurb: "Bell peppers are the colorful, fun-loving social butterflies of the vegetable world, always the life of the party. With their bright hues of red, yellow, and green, bell peppers bring a sense of joy and vibrancy to any dish. They’re sweet, crunchy, and full of flavor, making them a favorite among those who love to celebrate the good things in life. Thriving on bringing people together and spreading happiness, bell peppers are often the star of the show in salads, stir-fries, and other festive dishes. Bell peppers are versatile and adaptable, able to fit into a wide range of culinary creations with ease and flair",
        image: "images/bell_pepper.jpg"
    },
    "Tomato": {
        name: "Tomato",
        blurb: "Tomatoes are the enthusiastic, multi-faceted individuals of the vegetable world (though they’re technically a fruit!),  always bursting with energy and ideas. With their juicy, vibrant flavor and endless versatility, tomatoes can be found in everything from salads to sauces, always adding a touch of brightness and excitement. They love to explore new possibilities and connect with others, tomatoes are a staple in a wide range of cuisines, bringing people together over shared meals. And while they might seem simple at first glance, tomatoes have a depth of flavor that reveals itself over time, much like your complex and ever-evolving personality.",
        image: "images/tomato.jpg"
    },
    "Onion": {
        name: "Onion",
        blurb: "Onions are the sharp, witty provocateurs of the vegetable world, who loves to stir things up and challenge the status quo. With their many layers and pungent aroma, onions are never afraid to make their presence known, often bringing tears to your eyes—just as their quick wit and incisive arguments can leave others reeling. Onions are a staple in countless dishes, adding depth and complexity to flavors, thriving on intellectual debate and pushing the boundaries of thought. And while onions can be intense, they also have a sweet side that comes out when cooked slowly, revealing their underlying warmth and charm.",
        image: "images/onion.jpg"
    },
    "Corn": {
        name: "Corn",
        blurb: "Corn is the organized, efficient leader of the vegetable world, and thrives on structure and order. With its neat rows of kernels and solid, dependable nature, corn is a symbol of agricultural abundance and success. It’s a staple in many diets, providing essential nutrients and energy and is often the backbone of any organization, ensuring that everything runs smoothly. Corn can be boiled, grilled, or turned into popcorn, proving its versatility while still maintaining its core structure, much like those who are always in control, no matter the situation. And let’s not forget that corn is often associated with harvest and prosperity, reflecting their focus on achieving goals and getting results.",
        image: "images/corn.jpg"
    },
    "Green Bean": {
        name: "Green Bean",
        blurb: "Green beans are the nurturing, community-oriented members of the vegetable world, who is always looking out for others. With their crisp texture and mild flavor, green beans are a staple in home-cooked meals, often served in comforting, family-style dishes. They thrive on creating a warm and welcoming environment, green beans are the ultimate team player in the kitchen, complementing a wide range of flavors and dishes. They’re reliable, nutritious, and always there when you need them, always ready to lend a helping hand. Whether served fresh or in a classic casserole, green beans embody their commitment to caring for others and making sure everyone feels included.",
        image: "images/green_bean.jpg"
    },
    "Spinach": {
        name: "Spinach",
        blurb: "Spinach is the nurturing, inspirational leader of the vegetable world, always looking out for the well-being of others. With its deep green leaves and rich nutrient profile, spinach is a symbol of strength and vitality, often associated with health and wellness. Driven by a desire to inspire and uplift others, spinach is the vegetable that encourages you to take care of yourself and live your best life. It’s versatile enough to be enjoyed in salads, smoothies, or as a cooked side dish, proving that you don’t have to sacrifice taste for health. Spinach has a way of making you feel stronger and more energized, ready to take on whatever challenges come your way.",
        image: "images/spinach.jpg"
    },
    "Asparagus": {
        name: "Asparagus",
        blurb: "Asparagus is the bold, decisive leader of the vegetable world, who is always ready to take charge. With its tall, spear-like stalks and rich, earthy flavor, asparagus stands out as a symbol of power and authority. It’s a vegetable that demands attention and respect, and thrives on leadership and strategic thinking. Asparagus is often associated with luxury and fine dining, reflecting their focus on excellence and achievement. Whether it’s grilled, roasted, or steamed, asparagus brings a touch of sophistication to any meal, just as you brings a sense of purpose and direction to any project. Asparagus is known for its distinctive flavor and strong presence, leaving a lasting impression on those who encounter it.",
        image: "images/asparagus.jpg"
    }
};


const questions = [
    {
        question: "How do you prefer to spend your free time?",
        answers: [
            { text: "Building or crafting something with your hands", vegetable: "Zucchini"},
            { text: "Hosting a fun get-together with friends", vegetable: "Bell Pepper"},
            { text: "Brainstorming innovative ideas", vegetable: "Cauliflower"},
            { text: "Leading a group activity or team project", vegetable: "Corn"}
        ]
    },
    {
        question: "What’s your ideal vacation?",
        answers: [
            { text: "A quiet cabin in the woods with time for reflection", vegetable: "Sweet Potato"},
            { text: "A science or technology expo", vegetable: "Cauliflower"},
            { text: "A cultural immersion experience", vegetable: "Tomato"},
            { text: "An adventurous hike or outdoor activity", vegetable: "Zucchini"}
        ]
    },
    {
        question: "What’s your favorite kind of weather?",
        answers: [
            { text: "A soft, gentle drizzle", vegetable: "Kale"},
            { text: "Warm and inviting, perfect for gatherings", vegetable: "Green Bean"},
            { text: "Crisp and cool with a breeze", vegetable: "Broccoli"},
            { text: "Warm with a light breeze", vegetable: "Avocado"}
        ]
    },
    {
        question: "What role do you usually play in group projects?",
        answers: [
            { text: "The supporter who helps everyone get along", vegetable: "Potato"},
            { text: "The hands-on doer who gets things done", vegetable: "Zucchini"},
            { text: "The thinker who brings fresh perspectives", vegetable: "Cauliflower"},
            { text: "The creative contributor who adds flair", vegetable: "Avocado"}
        ]
    },
    {
        question: "How would your friends describe you?",
        answers: [
            { text: "Reliable and structured", vegetable: "Carrot"},
            { text: "Thoughtful and wise", vegetable: "Kale"},
            { text: "Compassionate and idealistic", vegetable: "Sweet Potato"},
            { text: "Witty and clever", vegetable: "Onion"}
        ]
    },
    {
        question: "What’s your dream job?",
        answers: [
            { text: "A scientist or researcher", vegetable: "Broccoli"},
            { text: "A writer or poet", vegetable: "Sweet Potato"},
            { text: "An entrepreneur or startup founder", vegetable: "Onion"},
            { text: "A nurse or counselor", vegetable: "Green Bean"}
        ]
    },
    {
        question: "How do you handle stress?",
        answers: [
            { text: "Talk it out with someone close", vegetable: "Potato"},
            { text: "Tackle it head-on with energy", vegetable: "Chili Pepper"},
            { text: "Seek quiet time to process emotions", vegetable: "Sweet Potato"},
            { text: "Reflect on the deeper meaning", vegetable: "Kale"}
        ]
    },
    {
        question: "What’s your favorite way to exercise?",
        answers: [
            { text: "Challenging workouts like obstacle courses", vegetable: "Onion"},
            { text: "Motivational group workouts", vegetable: "Spinach"},
            { text: "Engaging in a mentally challenging activity like rock climbing", vegetable: "Broccoli"},
            { text: "Going for a relaxing walk", vegetable: "Potato"}
        ]
    },
    {
        question: "How do you react to surprises?",
        answers: [
            { text: "I prefer no surprises and like to stick to the plan", vegetable: "Carrot"},
            { text: "I take control of surprises and turn them into opportunities", vegetable: "Asparagus"},
            { text: "I enjoy them if they have a deeper meaning", vegetable: "Kale"},
            { text: "I enjoy surprises that challenge my thinking", vegetable: "Onion"}
        ]
    },
    {
        question: "What kind of party do you prefer?",
        answers: [
            { text: "A game night or trivia contest", vegetable: "Cauliflower"},
            { text: "A small, well-organized gathering", vegetable: "Carrot"},
            { text: "An exclusive, high-end soiree", vegetable: "Asparagus"},
            { text: "A formal dinner or networking event", vegetable: "Corn"}
        ]
    },
    {
        question: "What motivates you the most?",
        answers: [
            { text: "Having fun and making others happy", vegetable: "Bell Pepper"},
            { text: "Outwitting challenges and finding clever solutions", vegetable: "Onion"},
            { text: "Caring for others and ensuring harmony", vegetable: "Green Bean"},
            { text: "Leading others to success", vegetable: "Corn"}
        ]
    },
    {
        question: "How do you prefer to communicate with others?",
        answers: [
            { text: "Clear and direct", vegetable: "Carrot"},
            { text: "Decisive and commanding", vegetable: "Asparagus"},
            { text: "Thoughtful and reflective", vegetable: "Tomato"},
            { text: "Witty and engaging", vegetable: "Chili Pepper"}
        ]
    },
    {
        question: "What’s your ideal way to unwind after a long day?",
        answers: [
            { text: "Writing in a journal or reflecting", vegetable: "Sweet Potato"},
            { text: "Creating art or playing music", vegetable: "Avocado"},
            { text: "Engaging in a high-energy activity", vegetable: "Chili Pepper"},
            { text: "Spending quality time with loved ones", vegetable: "Green Bean"}
        ]
    },
    {
        question: "Which fictional character would you most like to have as a sidekick?",
        answers: [
            { text: "A charismatic adventurer with a love for excitement", vegetable: "Tomato"},
            { text: "A free-spirited artist", vegetable: "Avocado"},
            { text: "A brilliant inventor with a knack for gadgets", vegetable: "Broccoli"},
            { text: "An inspiring mentor who leads by example", vegetable: "Spinach"}
        ]
    },
    {
        question: "What’s your cooking style?",
        answers: [
            { text: "Prepare well-balanced, hearty meals", vegetable: "Corn"},
            { text: "Cook comfort foods that everyone will enjoy", vegetable: "Potato"},
            { text: "Make meals that are both healthy and motivational", vegetable: "Spinach"},
            { text: "Make colorful and fun dishes", vegetable: "Bell Pepper"}
        ]
    },
    {
        question: "What’s your ideal pet?",
        answers: [
            { text: "A commanding and majestic eagle", vegetable: "Asparagus"},
            { text: "A free-spirited cat who loves to play", vegetable: "Avocado"},
            { text: "A mischievous ferret with a knack for hiding", vegetable: "Zucchini"},
            { text: "A well-trained, reliable dog", vegetable: "Carrot"}
        ]
    },
    {
        question: "What’s your biggest pet peeve?",
        answers: [
            { text: "Negativity and pessimism", vegetable: "Bell Pepper"},
            { text: "People being inconsiderate of others", vegetable: "Green Bean"},
            { text: "Lack of enthusiasm and passion", vegetable: "Tomato"},
            { text: "Boredom and routine", vegetable: "Chili Pepper"}
        ]
    },
    {
        question: "How do you handle conflict?",
        answers: [
            { text: "Keep things light and try to defuse the tension", vegetable: "Bell Pepper"},
            { text: "Inspire others to resolve it positively", vegetable: "Spinach"},
            { text: "Make a firm decision and stick to it", vegetable: "Asparagus"},
            { text: "Seek a solution that makes everyone happy", vegetable: "Tomato"}
        ]
    },
    {
        question: "What’s your ideal work environment?",
        answers: [
            { text: "Fast-paced and dynamic with opportunities for action", vegetable: "Chili Pepper"},
            { text: "Supportive and collaborative with a family-like atmosphere", vegetable: "Potato"},
            { text: "Goal-oriented and efficient with clear leadership", vegetable: "Corn"},
            { text: "Challenging and intellectually stimulating", vegetable: "Broccoli"}
        ]
    },
    {
        question: "How do you recharge your energy?",
        answers: [
            { text: "Working on a hobby or project independently", vegetable: "Zucchini"},
            { text: "Inspiring others or participating in group activities", vegetable: "Spinach"},
            { text: "Spending time with loved ones", vegetable: "Potato"},
            { text: "Solving puzzles or learning something new", vegetable: "Cauliflower"}
        ]
    }
];

const questionElement = document.getElementById("question");
const answerButtons = document.getElementById("answer-buttons");
const nextButton = document.getElementById("next-btn");
const prevButton = document.getElementById("prev-btn");
const warningMessage = document.getElementById("warning-message");

let currentQuestionIndex = 0;
let vegetableCount = {};
let selectedVegetable = null;
let selectedAnswers = {};

function startQuiz() {
    currentQuestionIndex = 0;
    vegetableCount = {};
    selectedAnswers = {}; // Reset selected answers
    nextButton.style.display = "block";
    prevButton.style.display = "none";
    showQuestion();
}

function showQuestion() {
    resetState();
    const currentQuestion = questions[currentQuestionIndex];
    const questionNo = currentQuestionIndex + 1;
    questionElement.innerHTML = `${questionNo}. ${currentQuestion.question}`;

    currentQuestion.answers.forEach(answer => {
        const button = document.createElement("button");
        button.innerHTML = answer.text;
        button.classList.add("btn");
        button.addEventListener("click", () => selectAnswer(answer.vegetable, button)); // Pass the button element
        
        // Apply the selected class if this answer was previously selected
        if (selectedAnswers[currentQuestionIndex] === answer.vegetable) {
            button.classList.add("selected");
        }

        answerButtons.appendChild(button);
    });

    prevButton.style.display = currentQuestionIndex === 0 ? "none" : "block";
}

function selectAnswer(vegetable, buttonElement) {
    // Deselect all buttons
    const buttons = document.querySelectorAll(".btn");
    buttons.forEach(btn => btn.classList.remove("selected"));

    // Mark the clicked button as selected
    buttonElement.classList.add("selected");

    // Store the selected vegetable for the current question
    selectedAnswers[currentQuestionIndex] = vegetable;

    // Update vegetable count
    if (vegetableCount[vegetable]) {
        vegetableCount[vegetable]++;
    } else {
        vegetableCount[vegetable] = 1;
    }

    // Show the Next button and hide warning message when an answer is selected
    nextButton.style.display = "block";
    warningMessage.style.display = "none";
}

function handleNextButton() {
    if (selectedAnswers[currentQuestionIndex]) {
        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            showQuestion();
        } else {
            showResults();
        }
    } else {
        // Show warning message if no answer is selected
        warningMessage.style.display = "block";
    }
}

function handlePrevButton() {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        showQuestion();
    }
}

function resetState() {
    while (answerButtons.firstChild) {
        answerButtons.removeChild(answerButtons.firstChild);
    }
}

function showResults() {
    resetState();

    const result = getMostSelectedVegetable();
    
    if (result) {
        const vegetable = vegetables[result];
        questionElement.innerHTML = `You are a ${vegetable.name}!`;
        if (vegetable.image) {
            questionElement.innerHTML += `<br><img src="${vegetable.image}" alt="${vegetable.name}" style="max-width: 100%; height: auto; border-radius: 8px; margin: 10px 0;">`;
        }
        questionElement.innerHTML += `<br>${vegetable.blurb}`;
    } else {
        questionElement.innerHTML = "<br>Unable to determine your vegetable.";
    }
    
    nextButton.style.display = "none";
    prevButton.style.display = "none";
}


function getMostSelectedVegetable() {
    let maxCount = 0;
    let mostSelectedVegetable = "";

    for (const vegetable in vegetableCount) {
        if (vegetableCount[vegetable] > maxCount) {
            maxCount = vegetableCount[vegetable];
            mostSelectedVegetable = vegetable;
        }
    }

    return mostSelectedVegetable;
}

nextButton.addEventListener("click", handleNextButton);
prevButton.addEventListener("click", handlePrevButton);

startQuiz();
